---
type: rule
archivedreason: 
title: Do you know when to branch in git?
guid: d023678e-aefe-45e8-a4f3-365d4c0f9c93
uri: do-you-know-when-to-branch-in-git
created: 2016-01-19T22:38:55.0000000Z
authors:
- title: Adam Cogan
  url: https://ssw.com.au/people/adam-cogan
- title: Eric Phan
  url: https://ssw.com.au/people/eric-phan
- title: Danijel Malik
  url: https://ssw.com.au/people/danijel-malik
- title: Edgar Rocha
  url: https://ssw.com.au/people/edgar-rocha
- title: Gabriel George
  url: https://ssw.com.au/people/gabriel-george
related: []
redirects: []

---


<dl class="image"><dt>​ <img src="/PublishingImages/finishing-a-feature-with-world-class-flow.jpg" alt="" />
<p><b>Note&#58; This rule applies&#160;to git. For branching advice in TFVC, see&#160;<a href="/_layouts/15/FIXUPREDIRECT.ASPX?WebId=3dfc0e07-e23a-4cbb-aac2-e778b71166a2&amp;TermSetId=07da3ddf-0924-4cd2-a6d4-a4809ae20160&amp;TermId=cd330379-4568-45fa-bd68-7229044697b7">Do you know when to branch in TFVC?</a></b> </p>The best way to handle continuous developm​ent and deployment is following&#160;<a href="https&#58;//guides.github.com/introduction/flow/">GitHub Flow</a>. &#160;The basic idea is to always deploy from <strong>master</strong>, and to create a feature branch for every feature. &#160;When the feature is complete, it is merged back to master via a pull request, which provides a trigger for other developers to build.<p></p><p>Using this strategy, <strong>master </strong>is always production-ready and deployable.</p> </dt></dl>
<br><excerpt class='endintro'></excerpt><br>
<div class="ms-rtestate-read ms-rte-embedcode ms-rte-embedil ms-rtestate-notify s4-wpActive">
   <iframe width="560" height="315" src="https&#58;//www.youtube.com/embed/9bP4-ly2qtQ?rel=0&amp;showinfo=0" frameborder="0"></iframe>&#160;</div><h3>1) Set up build system to deplo​y from the master branch</h3><p>Your build systems should always deploy from <strong> master</strong>, and should automatically deploy on every commit to master.</p><p> 
   <strong>Since master is always being deployed, it must always be in a deployable state.</strong></p><h3>2) Create a &quot;feature branch&quot; for every&#160;PBI</h3><p>When starting a PBI from the taskboard, create a branch from <b>master</b> with a&#160;descriptive name for that feature.</p><dl class="badImage"><dt> <img src="/PublishingImages/BadBranchName.png" alt="git branch start-stuff" data-pin-nopin="true" /> </dt><dd>Figure&#58; Bad example - Branch name is not descriptive</dd></dl><dl class="goodImage"><dt> <img src="/PublishingImages/GoodBranchName.png" alt="git branch create-basic-web-application" data-pin-nopin="true" /> </dt><dd> Figure&#58; Good Example - Branch name describes the intent of the change</dd></dl> 
   <p> 
      <strong>It is critical that this branch always comes off master, not another feature branch. Master is the only branch that is mandated to be in a deployable state, so any other option is unsafe.</strong></p><p>Obviously, we're creating a lot of branches and merging a lot under this strategy - and that's ok. &#160;Be sure to keep your PBIs small (as per&#160;<a href="/_layouts/15/FIXUPREDIRECT.ASPX?WebId=3dfc0e07-e23a-4cbb-aac2-e778b71166a2&amp;TermSetId=07da3ddf-0924-4cd2-a6d4-a4809ae20160&amp;TermId=2e446681-6eff-4cec-b955-e530edc4cdc8">do you break large tasks into smaller tasks</a>), and you will not have much merge pain.</p><p>The benefit of creating feature branches is to reduce the amount of conflicts and churn of unfinished code during development of a feature. &#160;It allows features to be development independently of each other, and reduces the amount of expensive &quot;pull latest from server, and rebuild everything&quot; operations, as well as greatly limiting the impact of commits with unfinished code.</p><h3>3) Commit your code to the branch</h3><p>While working, commit frequently to this branch with nice, descriptive messages. For example, &quot;Added a field to hold the product category to our timesheet read model&quot; and &quot;added a column to the timesheet summary UI for the product category&quot;.</p><dl class="badImage"><dt> <img src="/PublishingImages/BadCommitMessage.png" alt="git commit -m &quot;Started report change&quot;" data-pin-nopin="true" /> </dt><dd>Figure&#58; Bad Example - Commit message does not describe what was changed</dd></dl><dl class="goodImage"><dt> <img src="/SiteAssets/do-you-know-when-to-branch-in-git/GoodCommitMessage.png" alt="GoodCommitMessage.png" data-pin-nopin="true" /> </dt><dd>Figure&#58; Good Example - Commit message describes exactly what was changed. </dd></dl><h3>4) Open a pull request</h3><p>When the change is complete, or when you want feedback on anything, open a pull request to merge the branch back to <strong> master</strong>. The pull request is more than just a request to merge, it is a request to have someone review the code and architecture, and to discuss any issues. &#160;Resolve these issues with more commits in the branch before continuing.</p><p class="ssw15-rteElement-GreyBox">It is easy to chalk this step up as busy-work, but it is one of the most valuable parts of the strategy</p><h3>5) Deploy</h3><p>Deploy the changes to a staging environment. &#160;This allows the features to be tested before being merged to <strong>master</strong>.</p><p class="ssw15-rteElement-InfoBox">Some prefer to move this step&#160;to after the merge , especially when using a release management tool like Octopus Deploy (see <a href="/_layouts/15/FIXUPREDIRECT.ASPX?WebId=3dfc0e07-e23a-4cbb-aac2-e778b71166a2&amp;TermSetId=07da3ddf-0924-4cd2-a6d4-a4809ae20160&amp;TermId=e2608875-5b0b-4215-bee8-8ffd966dc972">Do you use the best deployment tool</a>). &#160;If you decide to go this route, remember that <strong>master</strong> should remain deployable and production ready at all times, and that all branches come from <b>master</b>. &#160;If skipping this step,&#160;ensure that you have CI on your feature&#160;branch to ensure that your branch compiles and passes all tests before merging.</p><h3>6) Merge to master</h3><p>Once everyone is happy and everything is tested, complete the pull request, which will merge back to <strong> master</strong>. Ensure you are not using the &quot;Fast Forward&quot; merge option (git), or details about the branch will be lost - it will appear as though all work was done in <strong>master</strong>. Being able to see the feature branches in the git log is very useful.&#160;</p><dl class="goodImage"><dt> <img src="/SiteAssets/do-you-know-when-to-branch-in-git/GoodGitHistory.png" alt="GoodGitHistory.png" /> </dt><dd>Figure&#58; Good Example - Each change is well described, small&#160;and in its own feature branch. </dd></dl><p class="ssw15-rteElement-GreyBox">Once merged, master should immediately and automatically be deployed (in a perfect world,&#160;to production) .</p>



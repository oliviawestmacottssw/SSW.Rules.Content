---
type: rule
archivedreason: 
title: Stored Procedures - Do you SET NOCOUNT ON for production and NOCOUNT OFF off for development/debugging purposes?
guid: e54a2194-4ce5-4aa5-84c5-148559178215
uri: stored-procedures-do-you-set-nocount-on-for-production-and-nocount-off-off-for-development-debugging-purposes
created: 2019-11-12T22:25:59.0000000Z
authors:
- title: Adam Cogan
  url: https://ssw.com.au/people/adam-cogan
related: []
redirects: []

---


<p class="ssw15-rteElement-P">​You should use SET NOCOUNT ON for production and NOCOUNT OFF off for development/debugging purposes (i.e. when you want the rowcounts to display as the messages from your T-SQL).​​<br></p>
<br><excerpt class='endintro'></excerpt><br>
<p>According to SQL Server Books Online&#58;<br>&quot;For stored procedures that contain several statements that do not return much actual data, this can provide a significant performance boost because network traffic is greatly reduced.&quot;</p><p><b>Example&#58;</b> Procedure that returns a scalar value (ClientID generated by an insert statement) should use OUTPUT keyword (not RETURN) to pass back data. This is how you should return a generated ClientID from the procedure, and also return a status value</p><p class="ssw15-rteElement-CodeArea">CREATE PROCEDURE procClientInsert<br>/*<br>'---------------------------------------------- <br>' Copyright 2001 SSW <br>' www.ssw.com.au All Rights Reserved.<br>' VERSION AUTHOR DATE COMMENT <br>' 1.0 DDK 17/12/2001 <br>'<br>'Calling example<br>'DECLARE @pintClientID int<br>'DECLARE @intReturnValue int<br>'exec @intReturnValue = procClientInsert 'TEST Entry', <br>@pintClientID OUTPUT<br>'PRINT @pintClientID<br>'PRINT @intReturnValue<br>'---------------------------------------------- <br>*/<br>@pstrCoName varchar (254),<br>@pintClientID int OUTPUT<br>AS<br>--IF ONE THING FAILS, ROLLBACK<br>SET XACT_ABORT ON<br>--THE COUNT WILL NOT NORMALLY DISPLAY IN AN APPLICATION IN PRODUCTION. <br>--GET RID OF IT BECAUSE IT IS EXTRA TRAFFIC, AND CAN CAUSE <br>PROBLEMS WITH SOME CLIENTS<br>SET NOCOUNT ON<br>--Generate a random number<br>SET @pintClientID = (SELECT CAST(RAND() * 100000000 AS int))<br>INSERT INTO Client (ClientID, CoName) VALUES (@pintClientID , <br>@pstrCoName)<br>SET XACT_ABORT OFF<br>IF @@ROWCOUNT = 1 <br> RETURN 0 -- SUCCESS<br>ELSE<br> BEGIN<br> IF @@ERROR=0 <br> RETURN 1 -- FAILURE <br> ELSE<br> RETURN @@ERROR -- FAILURE <br> END<br>SET NOCOUNT OFF</p><p><br>This procedure will display 0 or the error to indicate success or failure. You should base you actions on this return code.</p><p>This separates return values from actual data so that other programmers know what to expect.</p><p><b>Note&#58;</b>&#160;If you are using SQL Server stored procedures to edit or delete data using a SqlDataAdapter, make sure that you do not use SET NOCOUNT ON in the stored procedure definition. This causes the rows affected count returned to be zero, which the DataAdapter interprets as a concurrency conflict. In this event, a DBConcurrencyException will be thrown.​<br></p>


